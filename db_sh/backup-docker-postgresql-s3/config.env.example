# 基础配置
CONTAINER_NAME="trade-postgresql"
DB_NAME="MyDB"
DB_USER="sean"
DB_PASSWORD="1dU4JDFW7OyeMrfm"

# 备份保存目录与保留策略
BACKUP_DIR="/home/user/backups/postgres"
RETENTION_COUNT=7
BACKUP_PREFIX="pgbackup"
DOCKER_BIN="docker"
# 最高压缩（自定义格式）
PG_DUMP_OPTIONS="-Z9"

# rclone 上传配置（可选，默认 RCLONE_BIN=rclone）
# RCLONE_BIN="rclone"
# RCLONE_GLOBAL_FLAGS="--transfers 4 --checkers 8"

# 定义要执行的上传目标
UPLOAD_TARGETS=(R2_MAIN SFTP_MIRROR)

# --- Cloudflare R2 上传示例 (TYPE 默认 S3, MODE 默认 sync) ---
# R2_MAIN_TYPE=S3
# R2_MAIN_MODE=sync            # copy: 只传本次文件；sync: 同步整个 BACKUP_DIR
R2_MAIN_S3_PROVIDER=Cloudflare
R2_MAIN_S3_ENDPOINT="https://<account_id>.r2.cloudflarestorage.com"
R2_MAIN_S3_BUCKET="my-r2-bucket"
# R2_MAIN_S3_PATH 默认 "<CONTAINER_NAME>_backup" 若不填
# R2_MAIN_S3_PATH="postgres"
R2_MAIN_S3_REGION="auto"
R2_MAIN_S3_ACCESS_KEY="r2-access-key"
R2_MAIN_S3_SECRET_KEY="r2-secret-key"
# R2_MAIN_S3_STORAGE_CLASS="STANDARD"
# R2_MAIN_S3_ACL="private"
# R2_MAIN_RCLONE_FLAGS="--s3-chunk-size 64M"

# --- 远程服务器 SFTP 镜像示例 ---
SFTP_MIRROR_TYPE=SSH
SFTP_MIRROR_MODE=sync         # 同步整个 BACKUP_DIR，远端多余文件会被删除
SFTP_MIRROR_SSH_HOST="backup.example.com"
SFTP_MIRROR_SSH_USER="root"
SFTP_MIRROR_SSH_PORT=22
SFTP_MIRROR_SSH_PATH="/srv/backups/postgres"
# SFTP_MIRROR_SSH_KEY_FILE="~/.ssh/id_ed25519"
# SFTP_MIRROR_RCLONE_FLAGS="--links"
